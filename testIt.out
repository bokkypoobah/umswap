Compiled 1 Solidity file successfully


  umswap

      beforeEach
        --- Setup Accounts, NFT and Umswap Contracts - Assuming gasPrice: 20.0 gwei, ethUsd: 2000.0 ---
        > Deployed ERC721Mock - gasUsed: 1495787 ~ ETH 0.02991574 ~ USD 59
        erc721Mock deployed
        > Deployed UmswapFactory - gasUsed: 3754183 ~ ETH 0.07508366 ~ USD 150
        UmswapFactory deployed

        --- Setup Completed. UmswapFactory bytecode ~17029 ---
        > Minted ERC721Mock - gasUsed: 140203 ~ ETH 0.00280406 ~ USD 5
          + ERC721Mock:0x5FbD 3.0 Transfer(from: null:0x0000, to: user0:0x7099, tokenId: 111)
        > Minted ERC721Mock - gasUsed: 145803 ~ ETH 0.00291606 ~ USD 5
          + ERC721Mock:0x5FbD 4.0 Transfer(from: null:0x0000, to: user0:0x7099, tokenId: 222)
        > Minted ERC721Mock - gasUsed: 145815 ~ ETH 0.0029163 ~ USD 5
          + ERC721Mock:0x5FbD 5.0 Transfer(from: null:0x0000, to: user0:0x7099, tokenId: 333)
        > Minted ERC721Mock - gasUsed: 143003 ~ ETH 0.00286006 ~ USD 5
          + ERC721Mock:0x5FbD 6.0 Transfer(from: null:0x0000, to: user1:0x3C44, tokenId: 444)
        > Minted ERC721Mock - gasUsed: 145803 ~ ETH 0.00291606 ~ USD 5
          + ERC721Mock:0x5FbD 7.0 Transfer(from: null:0x0000, to: user1:0x3C44, tokenId: 555)
        > Minted ERC721Mock - gasUsed: 145803 ~ ETH 0.00291606 ~ USD 5
          + ERC721Mock:0x5FbD 8.0 Transfer(from: null:0x0000, to: user1:0x3C44, tokenId: 666)
          Account                                   ETH         ?????? (null) 0 ERC721MOCK (6)           
          -------------------- ------------------------ ----------------------- ---------------------------------------------
          deployer:0xf39F       9999.989211021137629004                     0.0 []                       
          user0:0x7099                          10000.0                     0.0 [111,222,333]            
          user1:0x3C44                          10000.0                     0.0 [444,555,666]            
          user2:0x90F7                          10000.0                     0.0 []                       
          integrator:0x15d3                     10000.0                     0.0 []                       
          UmswapFactory:0xe7f1                      0.0                     0.0 []                       

            # Address              Creator              Symbol   Name                           ERC-721 Collection       TotalSupply   In  Out  Rts  Rt# Aprv TokenIds                      
          --- -------------------- -------------------- -------- ------------------------------ -------------------- --------------- ---- ---- ---- ---- ---- ------------------------------

      05. Test 05 - Umswap Additional Tests
        > deployer->factory.newUmswap(erc721Mock, [111,333,555]) - gasUsed: 361722 ~ ETH 0.00723444 ~ USD 14
          + UmswapFactory:0xe7f1 9.0 NewUmswap(creator: deployer:0xf39F, timestamp: 1660540087, umswap: 0x9f1ac54BEF0DD2f6f3, collection: ERC721Mock:0x5FbD, name: Test Name :#'()+,-, tokenIds: 111,333,555)
        Tested newUmswap(...) - success
        > user0->erc721Mock.setApprovalForAll(umswap, true) - gasUsed: 46221 ~ ETH 0.00092442 ~ USD 1
          + ERC721Mock:0x5FbD 10.0 ApprovalForAll(owner: user0:0x7099, operator: Umswap:0x9f1a, approved: true)

        --- Before Any Umswaps ---
          Account                                   ETH       UMS00000 (18) 0.0 ERC721MOCK (6)           
          -------------------- ------------------------ ----------------------- ---------------------------------------------
          deployer:0xf39F       9999.988734105520635776                     0.0 []                       
          user0:0x7099           9999.99994085507454745                     0.0 [111,222,333]            
          user1:0x3C44                          10000.0                     0.0 [444,555,666]            
          user2:0x90F7                          10000.0                     0.0 []                       
          integrator:0x15d3                     10000.0                     0.0 []                       
          UmswapFactory:0xe7f1                      0.0                     0.0 []                       
          Umswap:0x9f1a                             0.0                     0.0 []                       

            # Address              Creator              Symbol   Name                           ERC-721 Collection       TotalSupply   In  Out  Rts  Rt# Aprv TokenIds                      
          --- -------------------- -------------------- -------- ------------------------------ -------------------- --------------- ---- ---- ---- ---- ---- ------------------------------
            0 Umswap:0x9f1a        deployer:0xf39F      UMS00000 Test Name :#'()+,-             ERC721Mock:0x5FbD                0.0    0    0    0    0    1 [111,333,555]/[]              

        Tested ERC-721 safeTransferFrom(user, umswap, 111) for error 'ERC721: transfer to non ERC721Receiver implementer'
        > user0->umswap([111,333], [], ...) - gasUsed: 410107 ~ ETH 0.00820214 ~ USD 16
          + ERC721Mock:0x5FbD 12.0 Approval(owner: user0:0x7099, approved: null:0x0000, tokenId: 111)
          + ERC721Mock:0x5FbD 12.1 Transfer(from: user0:0x7099, to: Umswap:0x9f1a, tokenId: 111)
          + ERC721Mock:0x5FbD 12.2 Approval(owner: user0:0x7099, approved: null:0x0000, tokenId: 333)
          + ERC721Mock:0x5FbD 12.3 Transfer(from: user0:0x7099, to: Umswap:0x9f1a, tokenId: 333)
          + Umswap:0x9f1a 12.4 Transfer(from: null:0x0000, to: user0:0x7099, tokens: 2.0)
          + Umswap:0x9f1a 12.5 Swapped(account: user0:0x7099, timestamp: 1660540090, inTokenIds: 111,333, outTokenIds: , stats: 2,0,0)

        --- user0 swapped in [111,333] ---
          Account                                   ETH       UMS00000 (18) 2.0 ERC721MOCK (6)           
          -------------------- ------------------------ ----------------------- ---------------------------------------------
          deployer:0xf39F       9999.988734105520635776                     0.0 []                       
          user0:0x7099          9999.999306050196872918                     2.0 [222]                    
          user1:0x3C44                          10000.0                     0.0 [444,555,666]            
          user2:0x90F7                          10000.0                     0.0 []                       
          integrator:0x15d3                     10000.0                     0.0 []                       
          UmswapFactory:0xe7f1                      0.0                     0.0 []                       
          Umswap:0x9f1a                             0.0                     0.0 [111,333]                

            # Address              Creator              Symbol   Name                           ERC-721 Collection       TotalSupply   In  Out  Rts  Rt# Aprv TokenIds                      
          --- -------------------- -------------------- -------- ------------------------------ -------------------- --------------- ---- ---- ---- ---- ---- ------------------------------
            0 Umswap:0x9f1a        deployer:0xf39F      UMS00000 Test Name :#'()+,-             ERC721Mock:0x5FbD                2.0    2    0    0    0    1 [111,333,555]/[111,333]       

        > user0->rate(5, 'Yeah', ...) - gasUsed: 101206 ~ ETH 0.00202412 ~ USD 4
          + Umswap:0x9f1a 13.0 Rated(account: user0:0x7099, timestamp: 1660540091, score: 5, text: Yeah 5, stats: 2,0,5)

        --- user0 rated 5 ---
          Account                                   ETH       UMS00000 (18) 2.0 ERC721MOCK (6)           
          -------------------- ------------------------ ----------------------- ---------------------------------------------
          deployer:0xf39F       9999.988734105520635776                     0.0 []                       
          user0:0x7099          9999.999185784154995104                     2.0 [222]                    
          user1:0x3C44                          10000.0                     0.0 [444,555,666]            
          user2:0x90F7                          10000.0                     0.0 []                       
          integrator:0x15d3                     10000.0                     0.0 []                       
          UmswapFactory:0xe7f1                      0.0                     0.0 []                       
          Umswap:0x9f1a                             0.0                     0.0 [111,333]                

            # Address              Creator              Symbol   Name                           ERC-721 Collection       TotalSupply   In  Out  Rts  Rt# Aprv TokenIds                      
          --- -------------------- -------------------- -------- ------------------------------ -------------------- --------------- ---- ---- ---- ---- ---- ------------------------------
            0 Umswap:0x9f1a        deployer:0xf39F      UMS00000 Test Name :#'()+,-             ERC721Mock:0x5FbD                2.0    2    0    5    1    1 [111,333,555]/[111,333]       

          user0:0x7099 rated 5

        > user1->rate(6, 'Yeah', ...) - gasUsed: 84106 ~ ETH 0.00168212 ~ USD 3
          + Umswap:0x9f1a 14.0 Rated(account: user1:0x3C44, timestamp: 1660540092, score: 6, text: Yeah 6, stats: 2,0,11)

        --- user1 rated 6 ---
          Account                                   ETH       UMS00000 (18) 2.0 ERC721MOCK (6)           
          -------------------- ------------------------ ----------------------- ---------------------------------------------
          deployer:0xf39F       9999.988734105520635776                     0.0 []                       
          user0:0x7099          9999.999185784154995104                     2.0 [222]                    
          user1:0x3C44          9999.999902020979645158                     0.0 [444,555,666]            
          user2:0x90F7                          10000.0                     0.0 []                       
          integrator:0x15d3                     10000.0                     0.0 []                       
          UmswapFactory:0xe7f1                      0.0                     0.0 []                       
          Umswap:0x9f1a                             0.0                     0.0 [111,333]                

            # Address              Creator              Symbol   Name                           ERC-721 Collection       TotalSupply   In  Out  Rts  Rt# Aprv TokenIds                      
          --- -------------------- -------------------- -------- ------------------------------ -------------------- --------------- ---- ---- ---- ---- ---- ------------------------------
            0 Umswap:0x9f1a        deployer:0xf39F      UMS00000 Test Name :#'()+,-             ERC721Mock:0x5FbD                2.0    2    0   11    2    1 [111,333,555]/[111,333]       

          user0:0x7099 rated 5
          user1:0x3C44 rated 6

        > user0->rate(10, 'Yeah', ...) - gasUsed: 40348 ~ ETH 0.00080696 ~ USD 1
          + Umswap:0x9f1a 15.0 Rated(account: user0:0x7099, timestamp: 1660540093, score: 10, text: Yeah 10, stats: 2,0,16)

        --- user0 rated 10 ---
          Account                                   ETH       UMS00000 (18) 2.0 ERC721MOCK (6)           
          -------------------- ------------------------ ----------------------- ---------------------------------------------
          deployer:0xf39F       9999.988734105520635776                     0.0 []                       
          user0:0x7099          9999.999139608124085172                     2.0 [222]                    
          user1:0x3C44          9999.999902020979645158                     0.0 [444,555,666]            
          user2:0x90F7                          10000.0                     0.0 []                       
          integrator:0x15d3                     10000.0                     0.0 []                       
          UmswapFactory:0xe7f1                      0.0                     0.0 []                       
          Umswap:0x9f1a                             0.0                     0.0 [111,333]                

            # Address              Creator              Symbol   Name                           ERC-721 Collection       TotalSupply   In  Out  Rts  Rt# Aprv TokenIds                      
          --- -------------------- -------------------- -------- ------------------------------ -------------------- --------------- ---- ---- ---- ---- ---- ------------------------------
            0 Umswap:0x9f1a        deployer:0xf39F      UMS00000 Test Name :#'()+,-             ERC721Mock:0x5FbD                2.0    2    0   16    2    1 [111,333,555]/[111,333]       

          user0:0x7099 rated 10
          user1:0x3C44 rated 6

        > user1->sendMessage(0x0, 0x0, 'Hello world!', ...) - gasUsed: 28005 ~ ETH 0.0005601 ~ USD 1
          + UmswapFactory:0xe7f1 16.0 Message(from: user1:0x3C44, timestamp: 1660540094, to: null:0x0000, umswapOrCollection: null:0x0000, topic: Topic 1, message: Hello world!)
        > user1->sendMessage(0x0, umswap, 'Hello world!', ...) - gasUsed: 30662 ~ ETH 0.00061324 ~ USD 1
          + UmswapFactory:0xe7f1 17.0 Message(from: user1:0x3C44, timestamp: 1660540095, to: null:0x0000, umswapOrCollection: Umswap:0x9f1a, topic: Topic 2, message: Hello world! - specific umswap)
        > user1->sendMessage(0x0, ERC-721, 'Hello world!', ...) - gasUsed: 34322 ~ ETH 0.00068644 ~ USD 1
          + UmswapFactory:0xe7f1 18.0 Message(from: user1:0x3C44, timestamp: 1660540096, to: null:0x0000, umswapOrCollection: ERC721Mock:0x5FbD, topic: Topic 2, message: Hello world! - specific umswap)
        > user2->sendMessage(0x0, 0x0, '(long message)', ...) - gasUsed: 34403 ~ ETH 0.00068806 ~ USD 1
          + UmswapFactory:0xe7f1 19.0 Message(from: user2:0x90F7, timestamp: 1660540097, to: null:0x0000, umswapOrCollection: null:0x0000, topic: Topic 3, message: 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah 🤪 Blah )
        Tested sendMessage(...) for error 'InvalidTopic'
        Tested sendMessage(...) for error 'InvalidUmswap'
        Tested sendMessage(...) for error 'InvalidMessage'
        Tested sending ETH to umswap for revert

        --- end ---
          Account                                   ETH       UMS00000 (18) 2.0 ERC721MOCK (6)           
          -------------------- ------------------------ ----------------------- ---------------------------------------------
          deployer:0xf39F       9999.988734105520635776                     0.0 []                       
          user0:0x7099          9999.999139608124085172                     2.0 [222]                    
          user1:0x3C44          9999.999798773643122337                     0.0 [444,555,666]            
          user2:0x90F7          9999.999875180356085521                     0.0 []                       
          integrator:0x15d3                     10000.0                     0.0 []                       
          UmswapFactory:0xe7f1                      0.0                     0.0 []                       
          Umswap:0x9f1a                             0.0                     0.0 [111,333]                

            # Address              Creator              Symbol   Name                           ERC-721 Collection       TotalSupply   In  Out  Rts  Rt# Aprv TokenIds                      
          --- -------------------- -------------------- -------- ------------------------------ -------------------- --------------- ---- ---- ---- ---- ---- ------------------------------
            0 Umswap:0x9f1a        deployer:0xf39F      UMS00000 Test Name :#'()+,-             ERC721Mock:0x5FbD                2.0    2    0   16    2    1 [111,333,555]/[111,333]       

          user0:0x7099 rated 10
          user1:0x3C44 rated 6

    ✔ 05. Test 05 (923ms)


  1 passing (2s)

